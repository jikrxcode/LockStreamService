<!DOCTYPE html>
<html>
<head>
    <title>üöÄ LockStream Service</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç -->
    <div class="user-header">
        <div class="user-info">
            <span id="username">–ì–æ—Å—Ç—å</span>
            <div class="balance">
                ‚ÇΩ<span id="balance">0.00</span>
            </div>
        </div>
        <button class="top-up-btn" onclick="showTopUpModal()">–ü–æ–ø–æ–ª–Ω–∏—Ç—å</button>
    </div>

    <button class="theme-switcher" onclick="toggleTheme()">
        <svg class="theme-icon" viewBox="0 0 24 24">
            <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1-8.313-12.454z"/>
        </svg>
    </button>

    <div class="container">
        <!-- –°–µ–∫—Ü–∏—è —Ç–∞—Ä–∏—Ñ–æ–≤ -->
        <div class="section">
            <h2>üì¶ –¢–∞—Ä–∏—Ñ–Ω—ã–µ –ø–ª–∞–Ω—ã</h2>
            <div class="plan-card">
                <h3>Basic</h3>
                <div class="price">449‚ÇΩ/–º–µ—Å</div>
                <ul>
                    <li>–õ—é–±–∞—è –ª–æ–∫–∞—Ü–∏—è –∏–∑ —Å–ø–∏—Å–∫–∞ –Ω–∏–∂–µ</li>
                    <li>–°–∫–æ—Ä–æ—Å—Ç—å –¥–æ 200 –ú–±–∏—Ç/—Å</li>
                    <li>1 —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ</li>
                </ul>
                <button onclick="showPayment('basic')">–ö—É–ø–∏—Ç—å</button>
            </div>

            <div class="plan-card">
                <h3>Pro</h3>
                <div class="price">899‚ÇΩ/–º–µ—Å</div>
                <ul>
                    <li>–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ</li>
                    <li>–°–∫–æ—Ä–æ—Å—Ç—å –¥–æ 1 –ì–±–∏—Ç/—Å</li>
                    <li>5 —É—Å—Ç—Ä–æ–π—Å—Ç–≤</li>
                </ul>
                <button onclick="showPayment('pro')">–ö—É–ø–∏—Ç—å</button>
            </div>
        </div>

        <!-- –°–µ–∫—Ü–∏—è –ª–æ–∫–∞—Ü–∏–π -->
        <div class="section">
            <h2>üåç –ù–∞—à–∏ –ª–æ–∫–∞—Ü–∏–∏</h2>
            <button class="location-btn" onclick="showConfig('russia')">
                <img src="https://flagcdn.com/ru.svg" class="flag" alt="Russia" width="32"> Moscow
            </button>

            <button class="location-btn" onclick="showConfig('finland')">
                <img src="https://flagcdn.com/fi.svg" class="flag" alt="Finland" width="32"> Helsinki
            </button>

            <button class="location-btn" onclick="showConfig('netherland')">
                <img src="https://flagcdn.com/nl.svg" class="flag" alt="Netherlands" width="32"> Amsterdam
            </button>

            <button class="location-btn" onclick="showConfig('germany')">
                <img src="https://flagcdn.com/de.svg" class="flag" alt="Germany" width="32"> Frankfurt
            </button>

            <button class="location-btn" onclick="showConfig('bulgaria')">
                <img src="https://flagcdn.com/bg.svg" class="flag" alt="Bulgaria" width="32"> Sofia
            </button>

            <button class="location-btn" onclick="showConfig('spain')">
                <img src="https://flagcdn.com/es.svg" class="flag" alt="Spain" width="32"> Madrid
            </button>

            <button class="location-btn" onclick="showConfig('singapore')">
                <img src="https://flagcdn.com/sg.svg" class="flag" alt="Singapore" width="32"> Singapore
            </button>

            <button class="location-btn" onclick="showConfig('usa')">
                <img src="https://flagcdn.com/us.svg" class="flag" alt="USA" width="32"> New York
            </button>

            <button class="location-btn" onclick="showConfig('france')">
                <img src="https://flagcdn.com/fr.svg" class="flag" alt="France" width="32"> Paris
            </button>
        </div>

        <!-- –°–µ–∫—Ü–∏—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ -->
        <div class="section">
            <h2>üÜò –ü–æ–¥–¥–µ—Ä–∂–∫–∞</h2>
            <button onclick="Telegram.WebApp.openTelegramLink('tg://resolve?domain=your_support')">
                üì© –ù–∞–ø–∏—Å–∞—Ç—å –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É
            </button>
        </div>
    </div>

    <script>
        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let userBalance = 0.00;
        let userName = "–ì–æ—Å—Ç—å";

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram Web App
        Telegram.WebApp.ready();
        Telegram.WebApp.expand();

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        function initUser() {
            try {
                if (typeof Telegram !== 'undefined' && Telegram.WebApp?.initDataUnsafe?.user) {
                    const tgUser = Telegram.WebApp.initDataUnsafe.user;
                    userName = tgUser.first_name || tgUser.username || "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å Telegram";
                    console.log('–î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:', tgUser);
                }
            } catch (e) {
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –¥–∞–Ω–Ω—ã—Ö:', e);
            }
            updateUserHeader();
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —à–∞–ø–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è
        function updateUserHeader() {
            document.getElementById('username').textContent = userName;
            document.getElementById('balance').textContent = userBalance.toFixed(2);
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–º—ã
        function initTheme() {
            const savedTheme = localStorage.getItem('theme') || 'light';
            document.body.setAttribute('data-theme', savedTheme);
            Telegram.WebApp.setHeaderColor(savedTheme === 'dark' ? '#2d2d2d' : '#ffffff');
        }

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–µ–º—ã
        function toggleTheme() {
            const currentTheme = document.body.getAttribute('data-theme') || 'light';
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            
            document.body.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            
            const icon = document.querySelector('.theme-icon');
            icon.style.transform = newTheme === 'dark' ? 'rotate(180deg)' : 'rotate(0deg)';
            icon.style.fill = newTheme === 'dark' ? '#FFD700' : 'var(--text-color)';
        }

        // –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞
        function showTopUpModal() {
            Telegram.WebApp.showPopup({
                title: '–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞',
                message: '–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É –¥–ª—è –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è:',
                buttons: [
                    {id: 'cancel', type: 'cancel'},
                    {id: 'confirm', type: 'default', text: '–ü–æ–ø–æ–ª–Ω–∏—Ç—å'}
                ]
            }, function(buttonId) {
                if(buttonId === 'confirm') {
                    const amount = parseFloat(prompt("–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É:"));
                    if (!isNaN(amount) && amount > 0) {
                        userBalance += amount;
                        updateUserHeader();
                        Telegram.WebApp.showAlert(`‚úÖ –ë–∞–ª–∞–Ω—Å –ø–æ–ø–æ–ª–Ω–µ–Ω –Ω–∞ ${amount.toFixed(2)}‚ÇΩ`);
                    } else {
                        Telegram.WebApp.showAlert("‚ùå –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Å—É–º–º–∞");
                    }
                }
            });
        }

        // –ü–æ–∫—É–ø–∫–∞ —Ç–∞—Ä–∏—Ñ–∞
        function showPayment(plan) {
            Telegram.WebApp.showAlert(`–û–ø–ª–∞—Ç–∞ —Ç–∞—Ä–∏—Ñ–∞ ${plan}...`);
        }

        // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å–µ—Ä–≤–µ—Ä–æ–≤
        const configs = {
            russia: {
                vless: "vless://...@ru.server.com:443?...",
                proxy: "socks5://user:pass@ru.server.com:1080"
            },
            finland: {
                vless: "vless://...@fi.server.com:443?...",
                proxy: "socks5://user:pass@fi.server.com:1080"
            },
            netherland: {
                vless: "vless://...@nl.server.com:443?...",
                proxy: "socks5://user:pass@nl.server.com:1080"
            },
            // –î–æ–±–∞–≤—å—Ç–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø–æ –∞–Ω–∞–ª–æ–≥–∏–∏
        };

        // –ü–æ–∫–∞–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
        function showConfig(location) {
            const config = configs[location];
            if (!config) {
                Telegram.WebApp.showAlert("‚ùå –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞");
                return;
            }
            Telegram.WebApp.showAlert(`
                üõ† –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è ${location}:
                Xray Vless: ${config.vless}
                SOCKS5 Proxy: ${config.proxy}
            `);
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.onload = function() {
            initTheme();
            initUser();
        };
    </script>
</body>
</html>